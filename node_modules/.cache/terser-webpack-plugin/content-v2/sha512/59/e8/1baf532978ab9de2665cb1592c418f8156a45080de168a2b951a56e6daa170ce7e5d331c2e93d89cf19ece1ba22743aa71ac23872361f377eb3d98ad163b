{"code":"window.graph=function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"\",r(r.s=1)}([function(t,e,r){\"use strict\";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,\"__esModule\",{value:!0});var o=function(){function t(t,e,r,i){void 0===e&&(e=t),void 0===r&&(r=t),void 0===i&&(i=1),this.r=t,this.g=e,this.b=r,this.a=i,this.r=this.clipTo8Bit(t),this.g=this.clipTo8Bit(e),this.b=this.clipTo8Bit(r),this.a=this.clipTo8Bit(256*i)/256}return t.prototype.toString=function(){return\"rgba(\"+this.r+\",\"+this.g+\",\"+this.b+\",\"+this.a+\")\"},t.prototype.clipTo8Bit=function(t){return Math.max(0,Math.min(255,Math.round(t)))},t.prototype.getDiff=function(t){return[t.a-this.a,t.g-this.g,t.b-this.b,t.a-this.a]},t.prototype.increment=function(t){this.r+=t[0],this.g+=t[1],this.b+=t[2],this.a+=t[3]},t}();e.Color=o;var s=function(){function t(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=20),this.radius=r,this.center=new a(t,e)}return t.prototype.draw=function(t,e){var r=e.stdColor;this.isSelected?r=e.selectedColor:this.isHovered&&(r=e.hoveredColor),t.beginPath(),t.arc(this.center.x,this.center.y,this.radius,0,2*Math.PI),t.fillStyle=r.toString(),t.fill(),t.strokeStyle=e.outlineColor.toString(),t.lineWidth=e.outlineWidth,t.stroke()},t.prototype.moveTo=function(t,e){this.center.moveTo(t,e)},t.prototype.contains=function(t){return t.distTo(this.center)<this.radius},t}(),a=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.distTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},t.prototype.moveTo=function(t,e){this.x=t,this.y=e},t.prototype.toString=function(){return this.constructor.name+\"(\"+this.x+\", \"+this.y+\")\"},t.prototype.lineTo=function(t){return new d(this,t)},t}();e.Point=a;var d=function(){function t(t,e){this.a=t,this.b=e}return t.prototype.draw=function(t,e){t.lineWidth=e.lineWidth,t.strokeStyle=e.stdColor.toString(),t.beginPath(),t.moveTo(this.a.x,this.a.y),t.lineTo(this.b.x,this.b.y),t.stroke()},t.prototype.midpoint=function(){return new a((this.a.x+this.b.x)/2,(this.a.y+this.b.y)/2)},t.prototype.length=function(){return this.a.distTo(this.b)},t.prototype.toString=function(){return this.a.toString()+\" to \"+this.b.toString()},t}();e.Line=d;var h=function(t){function e(e,r,i){var n=t.call(this,e.center,r.center)||this;return n.begin=e,n.end=r,n.data=i,n}return n(e,t),e.prototype.toString=function(){return console.log(\"called toString on\",this.data),this.data.toString()},e.prototype.drawText=function(t,e){var r=this.midpoint(),i=r.x,n=r.y;t.textAlign=\"center\",t.font=e.fontSize+\"px \"+e.fontFace;var o=null==this.data?\"\":e.displayString(this.data),s=t.measureText(o).width;if(this.length()>s){var a=this.begin.center.x-this.end.center.x,d=this.begin.center.y-this.end.center.y,h=Math.atan(d/a);t.save(),t.translate(i,n),t.rotate(h),this.length();var c=this.begin.radius+this.end.radius,u=this.length()-c-s,l=Math.max(0,Math.min(1,u/(2*c)));t.globalAlpha=l,t.fillStyle=e.stdColor.toString(),t.fillText(o,0,-e.lineWidth),t.restore()}},e}(d);e.Edge=h;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.toString=function(){return this.data.toString()},e.prototype.drawText=function(t,e){if(this.isSelected||this.isHovered){var r=this.center.x,i=this.center.y-(this.radius+4+e.textBoxPadding);t.textAlign=\"center\",t.font=e.fontSize+\"px \"+e.fontFace;var n=e.displayString(this.data),o=t.measureText(n),s=r-o.actualBoundingBoxLeft-e.textBoxPadding,a=i-o.actualBoundingBoxAscent-e.textBoxPadding,d=o.actualBoundingBoxLeft+o.actualBoundingBoxRight+2*e.textBoxPadding,h=o.actualBoundingBoxAscent+o.actualBoundingBoxDescent+2*e.textBoxPadding;t.fillStyle=e.textBoxColor.toString(),t.fillRect(s,a,d,h),t.fillStyle=e.textColor.toString(),t.fillText(n,r,i)}},e}(s);e.Vertex=c},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=r(2),n=document.getElementById(\"graph-gui\");e.default=function(t){return void 0===t&&(t=n),new i.default(t)}},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=r(0),n=r(3),o=r(4),s=r(5),a=function(){function t(t){var e=this;this.canvas=t,this.addEdge=function(t,r,n){var o=e.model.getEdgeWithVertices(t,r).edge;if(!o){var s=e.model.getVertexWithData(t).vertex,a=e.model.getVertexWithData(r).vertex;e.model.addEdge(new i.Edge(s,a,n))}return!o},this.addVertex=function(t,r,n){void 0===r&&(r=Math.random()*e.width),void 0===n&&(n=Math.random()*e.height);var o=e.model.getVertexWithData(t).vertex;if(!o){var s=new i.Vertex(r,n);s.data=t,e.model.addVertex(s)}return!o},this.removeVertex=function(t){var r=e.model.getVertexWithData(t).index;return r&&(e.model.removeVertex(r),e.model.removeAttachedEdges(r)),!!~r},this.removeEdge=function(t){var r=e.model.getEdgeWithData(t).index;return r&&e.model.removeEdge(r),!!~r},this.removeEdgeByVertices=function(t,r){var i=e.model.getEdgeWithVertices(t,r).index;return i&&e.model.removeEdge(i),!!~i},this.moveVertex=function(t,r,i){var n=e.model.getVertexWithData(t).vertex;return n&&e.model.moveVertex(n,r,i),!!n},this.editVertex=function(t,r){var i=e.model.getVertexWithData(t).vertex;return i&&e.model.editVertex(i,r),!!i},this.editEdge=function(t,r){var i=e.model.getEdgeWithData(t).edge;return i&&e.model.editEdge(i,r),!!i},this.editEdgeByVertices=function(t,r,i){var n=e.model.getEdgeWithVertices(t,r).edge;return n&&e.model.editEdge(n,i),!!n},this.backgroundColor=new i.Color(240),this.vertexPrefs={class:null,displayString:function(t){return t.toString()},textColor:\"#24B4F4\",textBoxColor:new i.Color(256,256,256,.9),textBoxPadding:2,fontFace:\"Arial\",fontSize:12,outlineWidth:2,outlineColor:new i.Color(0),stdColor:new i.Color(256),hoveredColor:new i.Color(230),selectedColor:new i.Color(160),editPrompt:\"Enter a new value for this vertex.\"},this.edgePrefs={lineWidth:2,displayString:function(t){return t.toString()},stdColor:new i.Color(0),hoveredColor:new i.Color(230),fontFace:\"Arial\",fontSize:12},this.event={onaddedge:function(t,e){console.warn(\"No onaddedge handler specified.\")},onaddvertex:function(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];console.warn(\"No onaddvertex handler specified.\")},onremovevertex:function(t){console.warn(\"No onremovevertex handler specified.\")},onremoveedge:function(t){console.warn(\"No onremoveedge handler specified.\")},onmovevertex:function(t,e,r){console.warn(\"No onmovevertex handler specified.\")},oneditvertex:function(t,e){console.warn(\"No oneditvertex handler specified.\")},oneditedge:function(t,e){console.warn(\"No oneditedge handler specified.\")}};var r=new n.default(this);this.model=new s.default(r,this),o.default(this.canvas,this.model),this.width=t.width,this.height=t.height}return t.prototype.initialize=function(){this.model.initialize()},t}();e.default=a},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=function(){function t(t){this.graph=t,this.canvas=t.canvas,this.context=this.canvas.getContext(\"2d\")}return t.prototype.drawBackground=function(){this.context.fillStyle=this.graph.backgroundColor.toString(),this.context.fillRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.drawEdges=function(t){for(var e=0,r=t;e<r.length;e++){r[e].draw(this.context,this.graph.edgePrefs)}},t.prototype.drawEdgeText=function(t){for(var e=0,r=t;e<r.length;e++){r[e].drawText(this.context,this.graph.edgePrefs)}},t.prototype.drawVertices=function(t){for(var e=t.length-1;e>=0;e--)t[e].draw(this.context,this.graph.vertexPrefs)},t.prototype.drawVertexText=function(t){for(var e=t.length-1;e>=0;e--)t[e].drawText(this.context,this.graph.vertexPrefs)},t.prototype.drawTitle=function(){this.context.fillStyle=this.graph.vertexPrefs.textColor.toString(),this.context.textAlign=\"center\",this.context.font=\"20px \"+this.graph.vertexPrefs.fontFace,this.context.fillText(\"Interactive Graph\",this.canvas.width/2,40),this.context.font=\"10px \"+this.graph.vertexPrefs.fontFace,this.context.fillText(\"Â© Stephen Karukas (github.com/skarukas)\",this.canvas.width/2,54)},t.prototype.drawLine=function(t,e){t.lineTo(e).draw(this.context,this.graph.edgePrefs)},t.prototype.redraw=function(t,e){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawBackground(),this.drawEdges(e),this.drawEdgeText(e),this.drawVertices(t),this.drawVertexText(t),this.drawTitle()},t}();e.default=i},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=function(t,e){var r={mouseDown:!1,ctrlDragged:!1,ctrlPressed:!1};function i(t){return\"Meta\"==t.key||\"Ctrl\"==t.key}t.onmousemove=function(t){r.mouseDown?r.ctrlDragged?e.ctrlDragTo(t.x,t.y):e.dragTo(t.x,t.y):e.checkHovered(t.x,t.y)},t.onmousedown=function(t){r.ctrlDragged=r.ctrlPressed,r.mouseDown=!0},t.onmouseup=function(t){r.ctrlDragged=!1,r.mouseDown=!1,e.releaseDrag(),e.checkHovered(t.x,t.y)},t.oncontextmenu=function(t){t.preventDefault();var i=e.getVertexAtPoint(t.x,t.y).vertex;return i&&e.tryEditVertex(i),r.mouseDown=!1,!1},window.onkeydown=function(e){i(e)&&(t.style.cursor=\"crosshair\",r.ctrlPressed=!0)},window.onkeyup=function(e){i(e)&&(t.style.cursor=\"auto\",r.ctrlPressed=!1)},window.onresize=function(){t.width=window.innerWidth,t.height=window.innerHeight,e.redraw()}}},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=r(0),n=function(){function t(t,e){this.view=t,this.graph=e,this.edges=[],this.vertices=[]}return t.prototype.initialize=function(t){void 0===t&&(t=10),this.vertices=[],this.edges=[];for(var e=0;e<t;e++){var r=Math.random()*window.innerWidth,i=Math.random()*window.innerHeight;this.tryAddVertex(Math.floor(r),Math.floor(i))}for(e=1;e<t;e++)this.tryAddEdge(this.vertices[0],this.vertices[e]);this.redraw()},t.prototype.redraw=function(){this.view.redraw(this.vertices,this.edges)},t.prototype.addEdge=function(t){this.edges.push(t),this.redraw()},t.prototype.addVertex=function(t){this.vertices.push(t),this.redraw()},t.prototype.removeEdge=function(t){this.edges.splice(t,1),this.redraw()},t.prototype.removeVertex=function(t){this.vertices.splice(t,1),this.redraw()},t.prototype.removeAttachedEdges=function(t){var e=this,r=this.vertices[t];this.edges=this.edges.filter((function(t){var i=t.begin==r||t.end==r;return i&&e.graph.event.onremoveedge(t.data),!i})),this.redraw()},t.prototype.moveVertex=function(t,e,r){t.moveTo(e,r),this.redraw()},t.prototype.editVertex=function(t,e){t.data=e,this.redraw()},t.prototype.editEdge=function(t,e){t.data=e,this.redraw()},t.prototype.getVertexAtPoint=function(t,e,r){var n=this.vertices.findIndex((function(n){return n!==r&&n.contains(new i.Point(t,e))}));return{index:n,vertex:this.vertices[n]}},t.prototype.getVertexWithData=function(t){var e=this.vertices.findIndex((function(e){return e.data==t}));return{index:e,vertex:this.vertices[e]}},t.prototype.getEdgeWithData=function(t){var e=this.edges.findIndex((function(e){return e.data==t}));return{index:e,edge:this.edges[e]}},t.prototype.getEdgeWithVertices=function(t,e){var r=this.edges.findIndex((function(r){return r.begin.data==t&&r.end.data==e||r.begin.data==e&&r.end.data==t}));return{index:r,edge:this.edges[r]}},t.prototype.edgeExists=function(t,e){for(var r=0,i=this.edges;r<i.length;r++){var n=i[r],o=n.begin,s=n.end;if(t==o&&e==s||t==s&&e==o)return!0}return!1},t.prototype.tryAddVertex=function(t,e){try{var r=this.graph.event.onaddvertex(t,e);if(!1===r)throw new Error;this.graph.vertexPrefs.class=this.graph.vertexPrefs.class||function(t){try{return t.constructor}catch(t){return Object}}(r);var n=new i.Vertex(t,e);!0!==r&&(n.data=r||n.data),this.addVertex(n)}catch(t){console.warn(\"Unable to add vertex.\",t.message)}},t.prototype.tryAddEdge=function(t,e){try{if(this.edgeExists(t,e))throw new Error(\"Edge already exists in graph.\");var r=this.graph.event.onaddedge(t.data,e.data);if(!1===r)throw new Error;var n=new i.Edge(t,e);!0!==r&&(n.data=r||n.data),this.addEdge(n)}catch(n){console.warn(\"Unable to add edge.\",n.message)}},t.prototype.tryEditVertex=function(t){try{var e=prompt(this.graph.vertexPrefs.editPrompt),r=this.graph.event.oneditvertex(t.data,e)||t.data;if(!(r instanceof this.graph.vertexPrefs.class))throw new Error(\"The input did not produce a result of class \"+this.graph.vertexPrefs.class.name);this.editVertex(t,r)}catch(t){console.warn(\"Unable to edit vertex.\",t.message)}},t.prototype.tryMoveVertex=function(t,e,r){try{if(!1===this.graph.event.onmovevertex(t.data,e,r))throw new Error;this.moveVertex(t,e,r)}catch(t){console.warn(\"Unable to move vertex.\",t.message)}},t.prototype.dragTo=function(t,e){this.curr&&this.tryMoveVertex(this.curr,t,e)},t.prototype.ctrlDragTo=function(t,e){this.curr&&(console.log(\"ctrl draggin babe\"),this.redraw(),this.view.drawLine(this.curr.center,new i.Point(t,e)),this.target=this.getVertexAtPoint(t,e,this.curr).vertex,this.target&&(this.target.isHovered=!0))},t.prototype.releaseDrag=function(){this.target&&(console.log(\"releasing target\"),this.tryAddEdge(this.curr,this.target),this.target.isHovered=!1,this.target=void 0)},t.prototype.checkHovered=function(t,e){var r=this.curr,i=this.getVertexAtPoint(t,e).index;if(this.curr=this.vertices[i],this.curr!==r){if(this.curr){this.curr.isHovered=!0;var n=this.vertices[0];this.vertices[0]=this.curr,this.vertices[i]=n}r&&(r.isHovered=!1),this.redraw()}},t}();e.default=n}]).default;","extractedComments":[]}